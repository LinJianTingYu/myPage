{"version":3,"sources":["webpack:///src/pages/pm/pmkpi.vue","webpack:///./src/pages/pm/pmkpi.vue?2555","webpack:///./src/pages/pm/pmkpi.vue","webpack:///src/basic/selectTable.vue","webpack:///./src/basic/selectTable.vue?c99e","webpack:///./src/basic/selectTable.vue"],"names":["pmkpi","components","v-selectTable","computed","extends_default","Object","vuex_esm","prom","state","user","pm","pmTypeNow","pm_typeNow","initPageNum","this","pm_kpivalues","length","getpmtype","data","result","rowDate","kpitypety","name","kpiType","kpiType_en","kpiTable2","kpiTable","kpiC","kpiE","counter","isCalculate","pmData","pmDataColums","isloading","created","sessionStorage","getItem","setpname_prom","window","addEventListener","setItem","methods","handleCurrentChange","pageIndex","typeChange","console","log","setpm_kpivules","$refs","kpitable","multipleSelection","output","outputTable","getkpi","_this","kpinames","qwe","index","push","params","kpiName","head","projectname","prom_pname","username","JSON","parse","filetype","$http","post","httppath","headers","then","response","$notify","title","message","type","catch","error","watch","val","pm_pmkpi","render","_vm","_h","$createElement","_c","_self","_v","attrs","size","on","change","model","value","callback","$$v","expression","_l","item","key","label","icon","click","$event","loading","width","ref","tableData","columns","staticStyle","date","scopedSlots","_u","fn","scope","_s","row","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","selectTable","tables","search","filter","keys_default","some","hasOwnProperty","String","toLowerCase","indexOf","props","default","Array","toggleSelection","rows","_this2","forEach","multipleTable","toggleRowSelection","clearSelection","handleSelectionChange","selection","selects","onerows","_this3","setTimeout","basic_selectTable","placeholder","prefix-icon","clearable","tooltip-effect","selection-change","select","show-overflow-tooltip"],"mappings":"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","file":"static/js/3.05ec56e975ab976ce598.js","sourcesContent":["<template>\r\n  <el-container>\r\n    <el-header>\r\n      </br>\r\n      <el-radio-group @change=\"typeChange\"\r\n                      v-model=\"kpiType\"\r\n                      size=\"mini\">\r\n        <el-radio-button :label=\"item.name\"\r\n                         v-for=\"(item, index) in getpm_kpitypety\"\r\n                         :key=\"index\"></el-radio-button>\r\n      </el-radio-group>\r\n      <el-button type=\"primary\"\r\n                 icon=\"el-icon-search\"\r\n                 size=\"mini\"\r\n                 @click=\"output()\">导出</el-button>\r\n      <el-button type=\"primary\"\r\n                 icon=\"el-icon-search\"\r\n                 size=\"mini\"\r\n                 :loading=\"isloading\"\r\n                 @click=\"getkpi()\">解析</el-button>\r\n      </br> </br>\r\n    </el-header>\r\n    <el-main>\r\n      <el-container>\r\n        <el-aside width=\"300px\">\r\n          <v-selectTable ref='kpitable'\r\n                         :tableData=\"pmData\"\r\n                         :columns=\"pmDataColums\"> </v-selectTable>\r\n          <!-- @muEvent=\"test\" -->\r\n        </el-aside>\r\n        <el-main>\r\n          <el-main>\r\n            <el-table :data=\"result\"\r\n                      style=\"width: 100%\">\r\n              <el-table-column :label=\"key\"\r\n                               v-for=\"(date, key) in result[0]\"\r\n                               :key=\"key\">\r\n                <template slot-scope=\"scope\">\r\n                  {{scope.row[key]}}\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </el-main>\r\n        </el-main>\r\n      </el-container>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n<script>\r\nimport { mapState, mapMutations, mapGetters } from 'vuex'\r\nimport outputTable from '../../basic/outputTable.js'\r\nimport selectTable from '../../basic/selectTable.vue'\r\nexport default {\r\n  components: {\r\n    'v-selectTable': selectTable\r\n  },\r\n  computed: {\r\n    ...mapGetters(['getpm_kpitypety']),\r\n    ...mapState({\r\n      prom: (state) => state.prom,\r\n      user: (state) => state.user,\r\n      pm: (state) => {\r\n        return state.pm\r\n      },\r\n      pmTypeNow: (state) => state.pm.pm_typeNow\r\n    }),\r\n    initPageNum () {\r\n      return this.pm.pm_kpivalues.length\r\n    },\r\n    getpmtype () {\r\n      var thisvalue = ''\r\n      if (this.pm.pm_typeNow === '3g rbs') {\r\n        thisvalue = 'PM_3G_RBS'\r\n      } else if (this.pm.pm_typeNow === '3g rnc') {\r\n        thisvalue = 'PM_3G_RNC'\r\n      } else if (this.pm.pm_typeNow === '4g') {\r\n        thisvalue = 'PM_4G'\r\n      } else {\r\n        thisvalue = 'PM_NBIoT'\r\n      }\r\n      return thisvalue\r\n    }\r\n    // mrtype () {\r\n    //   var mrtype = ''\r\n    //   if (this.pm.pm_typeNow === '3g rbs') {\r\n    //     mrtype = 'PM_3G_RBS'\r\n    //   } else if (this.pm.pm_typeNow === '3g rnc') {\r\n    //     mrtype = 'PM_3G_RNC'\r\n    //   } else if (this.pm.pm_typeNow === '4g') {\r\n    //     mrtype = 'PM_4G'\r\n    //   } else {\r\n    //     mrtype = 'PM_NBIoT'\r\n    //   }\r\n    //   return mrtype\r\n    // }\r\n  },\r\n  data () {\r\n    return {\r\n      result: [], // 结果表\r\n      rowDate: {},\r\n      kpitypety: [\r\n        { name: '接入' },\r\n        { name: '掉话' },\r\n        { name: '切换' },\r\n        { name: '话务量' }\r\n      ],\r\n      kpiType: '接入', // kpi所属类型\r\n      kpiType_en: '',\r\n      kpiTable2: [],\r\n      kpiTable: [{\r\n        kpiC: 'RNC 建立连接请求次数',\r\n        kpiE: 'RNC 建立连接请求次数',\r\n        counter: 'pmRrcConnEstabAtt - pmRrcConnEstabAttReatt',\r\n        isCalculate: false\r\n      }, {\r\n        kpiC: 'RNC 连接建立成功次数',\r\n        kpiE: 'RNC 连接建立成功次数',\r\n        counter: 'pmRrcConnEstabAtt - pmRrcConnEstabAttReatt',\r\n        isCalculate: false\r\n      }],\r\n      pmData: [], // 某一类KPI指标列表\r\n      pmDataColums: { kpiC: '中文名称' },\r\n      isloading: false\r\n    }\r\n  },\r\n  created () {\r\n    if (sessionStorage.getItem('pname')) {\r\n      this.setpname_prom(sessionStorage.getItem('pname'))\r\n    }\r\n    // 在页面刷新时将vuex里的信息保存到localStorage里\r\n    window.addEventListener('beforeunload', () => {\r\n      sessionStorage.setItem('pname', sessionStorage.getItem('pname'))\r\n    })\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setpm_kpivules', 'setpname_prom']),\r\n    // 点击跳转页面，显示对应的数据\r\n    handleCurrentChange (pageIndex) {\r\n      this.pmData = this.pm.pm_kpivalues\r\n    },\r\n    typeChange () {\r\n      console.log('typeChange 切换类型函数')\r\n      this.setpm_kpivules(this.kpiType)\r\n      this.handleCurrentChange(1)\r\n      console.log(this.kpiType)\r\n      this.$refs.kpitable.multipleSelection = []\r\n    },\r\n    output () {\r\n      if (this.result.length !== 0) {\r\n        outputTable(this.result)\r\n      }\r\n    },\r\n    getkpi () {\r\n      var kpinames = []\r\n      console.log('这是getkpi 函数')\r\n      console.log(this.$refs.kpitable.multipleSelection)\r\n      var qwe = this.$refs.kpitable.multipleSelection\r\n      for (let index in qwe) {\r\n        kpinames.push(qwe[index]['kpiE'])\r\n      }\r\n      var params = [{ 'kpiName': kpinames, 'kpiType': this.kpiType_en }]\r\n      var head = { 'projectname': this.prom.prom_pname, 'username': JSON.parse(sessionStorage.user).username, 'filetype': this.getpmtype }\r\n      console.log(head)\r\n      this.isloading = true\r\n      this.$http.post(this.user.httppath + '/api/Pm/GetKpiData',\r\n        params,\r\n        { headers: head }\r\n      ).then((response) => {\r\n        this.result = response\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '解析成功',\r\n          type: 'success'\r\n        })\r\n        this.isloading = false\r\n      }).catch((error) => {\r\n        this.$notify({\r\n          title: '警告',\r\n          message: error,\r\n          type: 'warning'\r\n        })\r\n        this.isloading = false\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    pmTypeNow (val) {\r\n      this.pmData = []\r\n      this.$refs.kpitable.multipleSelection = []\r\n    },\r\n    kpiType (val) {\r\n      if (val === '接入') {\r\n        this.kpiType_en = 'Integrity'\r\n      } else if (val === '掉话') {\r\n        this.kpiType_en = 'Mobility'\r\n      } else if (val === '切换') {\r\n        this.kpiType_en = 'Retainability'\r\n      } else if (val === '话务量') {\r\n        this.kpiType_en = 'Accessibility'\r\n      } else {\r\n        this.kpiType_en = val\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\nth {\r\n  text-align: left;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/pm/pmkpi.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_c('br'),_vm._v(\" \"),_c('el-radio-group',{attrs:{\"size\":\"mini\"},on:{\"change\":_vm.typeChange},model:{value:(_vm.kpiType),callback:function ($$v) {_vm.kpiType=$$v},expression:\"kpiType\"}},_vm._l((_vm.getpm_kpitypety),function(item,index){return _c('el-radio-button',{key:index,attrs:{\"label\":item.name}})}),1),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.output()}}},[_vm._v(\"导出\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\",\"size\":\"mini\",\"loading\":_vm.isloading},on:{\"click\":function($event){_vm.getkpi()}}},[_vm._v(\"解析\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br')],1),_vm._v(\" \"),_c('el-main',[_c('el-container',[_c('el-aside',{attrs:{\"width\":\"300px\"}},[_c('v-selectTable',{ref:\"kpitable\",attrs:{\"tableData\":_vm.pmData,\"columns\":_vm.pmDataColums}})],1),_vm._v(\" \"),_c('el-main',[_c('el-main',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.result}},_vm._l((_vm.result[0]),function(date,key){return _c('el-table-column',{key:key,attrs:{\"label\":key},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(scope.row[key])+\"\\n              \")]}}])})}),1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3c2ec13e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/pm/pmkpi.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c2ec13e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./pmkpi.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./pmkpi.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./pmkpi.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c2ec13e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./pmkpi.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/pm/pmkpi.vue\n// module id = null\n// module chunks = ","// 带搜索和选择框的表格\r\n<template>\r\n  <div>\r\n    <!-- <el-input placeholder=\"输入关键字进行过滤\"\r\n              v-model=\"search\"></el-input> -->\r\n    <el-input placeholder=\"输入关键字进行过滤\"\r\n              v-model=\"search\"\r\n              prefix-icon=\"el-icon-search\"\r\n              size=\"mini\"\r\n              clearable\r\n              style=\"width:200px\"></el-input>\r\n    <el-table ref=\"multipleTable\"\r\n              :data=\"tables\"\r\n              tooltip-effect=\"dark\"\r\n              style=\"width: 100%\"\r\n              @selection-change=\"handleSelectionChange\"\r\n              @select=\"selects\">\r\n      <el-table-column type=\"selection\"\r\n                       width=\"55\"></el-table-column>\r\n      <el-table-column :label=\"date\"\r\n                       v-for=\"(date, key) in columns\"\r\n                       :key=\"key\"\r\n                       :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"scope\">{{scope.row[key]}}</template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  computed: {\r\n    // 模糊搜索\r\n    tables () {\r\n      const search = this.search\r\n      if (search) {\r\n        return this.tableData.filter(data => {\r\n          return Object.keys(data).some(key => {\r\n            if (!this.columns.hasOwnProperty(key)) {\r\n              return false\r\n            } else {\r\n              return (\r\n                String(data[key])\r\n                  .toLowerCase()\r\n                  .indexOf(search) > -1\r\n              )\r\n            }\r\n          })\r\n        })\r\n      }\r\n      return this.tableData\r\n    }\r\n  },\r\n  props: {\r\n    columns: {\r\n      // 待呈现的列 格式 {'column1': 'show-column1','column2': 'show-column2'}\r\n      type: Object,\r\n      default: () => { }\r\n    },\r\n    tableData: {\r\n      // 待呈现的表 格式 [{'column1': 'value1', 'column2': 'value2'},{'column1': 'value1', 'column2': 'value2'}]\r\n      type: Array,\r\n      default: () => []\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      search: '', // 搜索的字段\r\n      multipleSelection: []// 已经选中的表\r\n    }\r\n  },\r\n  methods: {\r\n    toggleSelection (rows) {\r\n      if (rows) {\r\n        rows.forEach(row => {\r\n          this.$refs.multipleTable.toggleRowSelection(row)\r\n        })\r\n      } else {\r\n        this.$refs.multipleTable.clearSelection()\r\n      }\r\n    },\r\n    handleSelectionChange (selection) {\r\n      console.log('handleSelectionChange 函数')\r\n    },\r\n    selects (selection, onerows) {\r\n      // 选中某一行触发函数\r\n      console.log('选择某一项触发的函数')\r\n      console.log(selection)\r\n      this.multipleSelection = selection\r\n    }\r\n  },\r\n  watch: {\r\n    tables (val) { // 监测搜索后数组的变化\r\n      setTimeout(() => {\r\n        this.toggleSelection(this.multipleSelection)\r\n      }, 250)\r\n    }\r\n    // multipleSelection () {\r\n    //   this.$emit('muEvent', this.multipleSelection)\r\n    // }\r\n  }\r\n}\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/basic/selectTable.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-input',{staticStyle:{\"width\":\"200px\"},attrs:{\"placeholder\":\"输入关键字进行过滤\",\"prefix-icon\":\"el-icon-search\",\"size\":\"mini\",\"clearable\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_vm._v(\" \"),_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tables,\"tooltip-effect\":\"dark\"},on:{\"selection-change\":_vm.handleSelectionChange,\"select\":_vm.selects}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_vm._v(\" \"),_vm._l((_vm.columns),function(date,key){return _c('el-table-column',{key:key,attrs:{\"label\":date,\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row[key]))]}}])})})],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-39fd80b6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/basic/selectTable.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./selectTable.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./selectTable.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-39fd80b6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./selectTable.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/basic/selectTable.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
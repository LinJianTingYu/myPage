webpackJsonp([43],{"9jzx":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("3cXf"),i=o.n(s),a=o("4YfN"),l=o.n(a),n=o("9rMa"),r=o("9cX3"),m=o("Ymoe"),c={computed:l()({},Object(n.e)({prom:function(t){return t.prom},user:function(t){return t.user}})),components:{"v-exportTable":r.a,"v-pageTable":m.a},data:function(){return{uploadAction:"",atb_format:!1,processNum:0,headers:{},uploadHead:{},form:{"等待扩容小区":"","站号":"","站名":"","分公司":"","扩容前配置":"","双载波扩容方案":"","扩容扇区数":"","扩容后配置":"","扩容小区":""},isShow_Par:!1,isShow:!1,fileList:[],selectrow:-1,tables:[],pageNum:0,isloading:!1,resultTable:{},resultTableName:[{tableName:"扩容结果"},{tableName:"扩容错误信息"},{tableName:"错误信息"}],oneTable:[],tableName:"",oneTableData:[]}},created:function(){var t=this;sessionStorage.getItem("pname")&&this.setpname_prom(sessionStorage.getItem("pname")),window.addEventListener("beforeunload",function(){sessionStorage.setItem("pname",sessionStorage.getItem("pname"))}),this.headers={projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"expansion"},this.uploadHead={projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"expansion",Authorization:"bearer "+sessionStorage.getItem("token")},this.uploadAction=this.user.httppath+"/api/Expasion/Upload",console.log("这是uploadAction"),console.log(this.uploadAction),console.log(i()(this.headers)),this.$http.post(this.user.httppath+"/api/Expasion/GetInTemplate",{},{headers:this.headers}).then(function(e){console.log(e),t.tables=e,t.handleCurrentChange(1),t.initPageNum()}).catch(function(t){console.log(t)})},methods:l()({},Object(n.d)(["setpname_prom"]),{handleCurrentChange:function(t){this.tablesData=this.tables.slice(6*(t-1),6*(t-1)+6)},initPageNum:function(){this.pageNum=this.tables.length},initPageNum_1:function(){this.pageNum_1=this.oneTable.length},analysis:function(){"default"!==this.prom.prom_pname?this.dbInput():this.$notify({title:"警告",message:"没有权限对公有工程进行数据入库",type:"warning"})},send:function(){console.log("这是send 函数")},handleEdit:function(t,e){this.selectrow=t,this.form["等待扩容小区"]=this.tables[t]["等待扩容小区"],this.form["站号"]=this.tables[t]["站号"],this.form["站名"]=this.tables[t]["站名"],this.form["分公司"]=this.tables[t]["分公司"],this.form["扩容前配置"]=this.tables[t]["扩容前配置"],this.form["双载波扩容方案"]=this.tables[t]["双载波扩容方案"],this.form["扩容扇区数"]=this.tables[t]["扩容扇区数"],this.form["扩容后配置"]=this.tables[t]["扩容后配置"],this.form["扩容小区"]=this.tables[t]["扩容小区"],this.isShow=!this.isShow},paramPeizhi:function(){this.isShow_Par=!0},parClose:function(){this.isShow_Par=!1},addrow:function(){this.selectrow=-1,this.form["等待扩容小区"]="",this.form["站号"]="",this.form["站名"]="",this.form["分公司"]="",this.form["扩容前配置"]="",this.form["双载波扩容方案"]="",this.form["扩容扇区数"]="",this.form["扩容后配置"]="",this.form["扩容小区"]="",this.isShow=!this.isShow},handleDelete:function(t,e){this.tables.splice(t,1),console.log(t,e)},changeTableName:function(){console.log(this.tableName),""!==this.resultTable&&("扩容结果"===this.tableName?this.oneTable=this.resultTable["扩容结果"]:"扩容错误信息"===this.tableName?this.oneTable=this.resultTable["扩容错误信息"]:this.oneTable=this.resultTable["错误信息"])},dbInput:function(){var t=this;console.log("dbInput"),this.isloading=!0,this.$http.post(this.user.httppath+"/api/Expasion/RndExpansion",this.tables,{headers:this.headers}).then(function(e){console.log("函数 dbInput success"),console.log(e),t.resultTable=e,t.isloading=!1}).catch(function(e){console.log("函数 dbInput error"),console.log(e),t.isloading=!1})},myUpload:function(){console.log("这是函数 myupload"),console.log(this.fileList),this.$http.post(this.user.httppath+"/api/Mr/Upload",this.fileList).then(function(t){}).catch(function(t){console.log(t)})},success:function(t,e,o){console.log(t)},submitUpload:function(){console.log("这是函数 submitUpload"),"default"===this.prom.prom_pname?this.$notify({title:"警告",message:"没有权限对公共工程进行操作",type:"warning"}):this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t),console.log(e)},handlePreview:function(t){console.log(t)},onSubmit:function(t){-1!==t?(console.log(this.tables[t]),this.tables[t]["等待扩容小区"]=this.form["等待扩容小区"],this.tables[t]["站号"]=this.form["站号"],this.tables[t]["站名"]=this.form["站名"],this.tables[t]["分公司"]=this.form["分公司"],this.tables[t]["扩容前配置"]=this.form["扩容前配置"],this.tables[t]["双载波扩容方案"]=this.form["双载波扩容方案"],this.tables[t]["扩容扇区数"]=this.form["扩容扇区数"],this.tables[t]["扩容后配置"]=this.form["扩容后配置"],this.tables[t]["扩容小区"]=this.form["扩容小区"]):this.tables.push(this.form),this.isShow=!this.isShow},cancel:function(){this.form.CATEGORY="",this.form.CELLTYPE2="",this.form.FILTER="",this.form.MONAME="",this.form.MOVALUE="",this.form.PARANAME="",this.form.RECOMMENDEDVALUE="",this.form.VERSION="",this.isShow=!1}})},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"padding-left":"10px"}},[o("br"),t._v(" "),o("br"),t._v(" "),o("el-upload",{ref:"upload",staticClass:"elmro",attrs:{action:t.uploadAction,headers:t.uploadHead,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1,limit:1,multiple:!0,accept:".xlsx"}},[o("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("支持.xlsx格式的文件")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")])],1),t._v(" "),o("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",size:"mini"},on:{click:t.paramPeizhi}},[t._v("参数配置")]),t._v(" "),o("el-button",{staticStyle:{width:"80px","margin-left":"2px"},attrs:{type:"primary",loading:t.isloading,size:"mini"},on:{click:t.analysis}},[t._v("解析")]),t._v(" "),o("v-exportTable",{staticStyle:{"margin-left":"2px"},attrs:{tableData:t.oneTable}}),t._v(" "),t.isShow_Par?o("div",[o("br"),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addrow}},[t._v("添加")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.parClose}},[t._v("关闭")]),t._v(" "),o("el-table",{attrs:{border:"","highlight-current-row":!0,data:t.tablesData}},[t._l(t.tablesData[0],function(e,s){return o("el-table-column",{key:s,attrs:{label:s,"show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row[s])+"\n        ")]}}])})}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",fixed:"right"},on:{click:function(o){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],2),t._v(" "),o("div",{staticClass:"pagination-wrapper"},[o("el-pagination",{attrs:{layout:"prev, pager, next",total:t.pageNum,"page-size":6},on:{"current-change":t.handleCurrentChange}})],1)],1):t._e(),t._v(" "),o("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"10px"},attrs:{inline:!0}},[o("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[o("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"表名称"},on:{change:t.changeTableName},model:{value:t.tableName,callback:function(e){t.tableName=e},expression:"tableName"}},t._l(t.resultTableName,function(e){return o("el-option",{key:e.tableName,attrs:{label:e.tableName,value:e.tableName}},[t._v(t._s(e.tableName))])}),1)],1)],1),t._v(" "),o("v-pageTable",{attrs:{tableData:t.oneTable}}),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("el-dialog",{attrs:{title:"参数设置",visible:t.isShow,"close-on-click-modal":!1,"append-to-body":t.atb_format},on:{"update:visible":function(e){t.isShow=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"110px"}},[o("el-form-item",{attrs:{label:"等待扩容小区:"}},[o("el-input",{model:{value:t.form.等待扩容小区,callback:function(e){t.$set(t.form,"等待扩容小区",e)},expression:"form.等待扩容小区"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"站号:"}},[o("el-input",{model:{value:t.form.站号,callback:function(e){t.$set(t.form,"站号",e)},expression:"form.站号"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"站名:"}},[o("el-input",{model:{value:t.form.站名,callback:function(e){t.$set(t.form,"站名",e)},expression:"form.站名"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"分公司:"}},[o("el-input",{model:{value:t.form.分公司,callback:function(e){t.$set(t.form,"分公司",e)},expression:"form.分公司"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"扩容前配置:"}},[o("el-input",{model:{value:t.form.扩容前配置,callback:function(e){t.$set(t.form,"扩容前配置",e)},expression:"form.扩容前配置"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"双载波扩容方案:"}},[o("el-input",{model:{value:t.form.双载波扩容方案,callback:function(e){t.$set(t.form,"双载波扩容方案",e)},expression:"form.双载波扩容方案"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"扩容扇区数:"}},[o("el-input",{model:{value:t.form.扩容扇区数,callback:function(e){t.$set(t.form,"扩容扇区数",e)},expression:"form.扩容扇区数"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"扩容后配置:"}},[o("el-input",{model:{value:t.form.扩容后配置,callback:function(e){t.$set(t.form,"扩容后配置",e)},expression:"form.扩容后配置"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"扩容小区:"}},[o("el-input",{model:{value:t.form.扩容后配置,callback:function(e){t.$set(t.form,"扩容后配置",e)},expression:"form.扩容后配置"}})],1),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.onSubmit(t.selectrow)}}},[t._v("确认")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)],1),t._v(" "),o("br")],1)},staticRenderFns:[]};var u=o("C7Lr")(c,h,!1,function(t){o("nUf7")},null,null);e.default=u.exports},nUf7:function(t,e){}});
//# sourceMappingURL=43.e68c2289bc2e04f4cc66.js.map
{"version":3,"sources":["webpack:///src/pages/mr/mrinput.vue","webpack:///./src/pages/mr/mrinput.vue?27e1","webpack:///./src/pages/mr/mrinput.vue"],"names":["mrinput","computed","extends_default","Object","vuex_esm","prom","state","user","data","uploaadAction","processNum","head","uploadHead","fileList","isloading","created","sessionStorage","getItem","this","setpname_prom","window","addEventListener","setItem","console","log","projectname","prom_pname","username","JSON","parse","filetype","Authorization","httppath","methods","analysis","dbInput","$notify","title","message","type","send","processbar","_this","$http","post","headers","then","response","catch","error","_this2","submitUpload","$refs","upload","submit","handleRemove","file","handlePreview","mr_mrinput","render","_vm","_h","$createElement","_c","_self","attrs","width","_v","ref","staticClass","action","on-preview","on-remove","file-list","auto-upload","limit","multiple","accept","slot","size","staticStyle","margin-left","on","click","loading","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2IA0CAA,GACAC,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EACAE,KAAA,SAAAC,GAAA,OAAAA,EAAAD,MACAE,KAAA,SAAAD,GAAA,OAAAA,EAAAC,SAGAC,KAPA,WAQA,OACAC,cAAA,GACAC,WAAA,EACAC,QACAC,cACAC,YACAC,WAAA,IAGAC,QAjBA,WAkBAC,eAAAC,QAAA,UACAC,KAAAC,cAAAH,eAAAC,QAAA,UAGAG,OAAAC,iBAAA,0BACAL,eAAAM,QAAA,QAAAN,eAAAC,QAAA,YAEAM,QAAAC,IAAA,eACAN,KAAAP,MAAAc,YAAAP,KAAAb,KAAAqB,WAAAC,SAAAC,KAAAC,MAAAb,eAAAT,MAAAoB,SAAAG,SAAA,MACAZ,KAAAN,YAAAa,YAAAP,KAAAb,KAAAqB,WAAAC,SAAAC,KAAAC,MAAAb,eAAAT,MAAAoB,SAAAG,SAAA,KAAAC,cAAA,UAAAf,eAAAC,QAAA,UACAC,KAAAT,cAAAS,KAAAX,KAAAyB,SAAA,iBACAT,QAAAC,IAAAN,KAAAT,eACAc,QAAAC,IAAAN,KAAAP,OAEAsB,QAAW/B,OACXC,OAAAC,EAAA,EAAAD,EAAA,mBACA+B,SAFA,WAIA,YAAAhB,KAAAb,KAAAqB,WAQAR,KAAAiB,UAPAjB,KAAAkB,SACAC,MAAA,KACAC,QAAA,kBACAC,KAAA,aAMAC,KAdA,WAeAjB,QAAAC,IAAA,cAEAiB,WAjBA,WAiBA,IAAAC,EAAAxB,KACAK,QAAAC,IAAA,4BACAN,KAAAyB,MAAAC,KAAA1B,KAAAX,KAAAyB,SAAA,gCAEAa,QAAA3B,KAAAP,OACAmC,KAAA,SAAAC,GAQA,OAPAxB,QAAAC,IAAA,oBACAD,QAAAC,IAAAuB,GACAL,EAAAN,SACAC,MAAA,KACAC,QAAA,OACAC,KAAA,YAEAQ,IACAC,MAAA,SAAAC,GACA1B,QAAAC,IAAA,uBACAD,QAAAC,IAAA,SACAkB,EAAAN,SACAC,MAAA,KACAC,QAAAW,EACAV,KAAA,YAEAhB,QAAAC,IAAAyB,MAGAd,QA1CA,WA0CA,IAAAe,EAAAhC,KACAK,QAAAC,IAAA,WACAN,KAAAJ,WAAA,EACAI,KAAAyB,MAAAC,KAAA1B,KAAAX,KAAAyB,SAAA,yBAEAa,QAAA3B,KAAAP,OACAmC,KAAA,SAAAC,GACAG,EAAApC,WAAA,EACAoC,EAAAd,SACAC,MAAA,KACAC,QAAA,OACAC,KAAA,YAEAhB,QAAAC,IAAA,sBACAD,QAAAC,IAAAuB,KACAC,MAAA,SAAAC,GACAC,EAAApC,WAAA,EACAoC,EAAAd,SACAC,MAAA,KACAC,QAAA,OAAAW,EACAV,KAAA,YAEAhB,QAAAC,IAAA,oBACAD,QAAAC,IAAAyB,MAcAE,aA/EA,WAgFA5B,QAAAC,IAAA,qBACA,YAAAN,KAAAb,KAAAqB,WACAR,KAAAkB,SACAC,MAAA,KACAC,QAAA,gBACAC,KAAA,aAKAhB,QAAAC,IAAAN,KAAAP,MACAO,KAAAkC,MAAAC,OAAAC,WAGAC,aA9FA,SA8FAC,EAAA3C,GACAU,QAAAC,IAAA,qBACAD,QAAAC,IAAAgC,GACAjC,QAAAC,IAAAX,IAEA4C,cAnGA,SAmGAD,GACAjC,QAAAC,IAAA,sBACAD,QAAAC,IAAAgC,OC5KeE,GADEC,OAFjB,WAA0B,IAAAC,EAAA1C,KAAa2C,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,gBAAAA,EAAA,YAAyCE,OAAOC,MAAA,WAAiBH,EAAA,MAAAH,EAAAO,GAAA,KAAAJ,EAAA,MAAAH,EAAAO,GAAA,KAAAJ,EAAA,aAA4DK,IAAA,SAAAC,YAAA,QAAAJ,OAAwCK,OAAAV,EAAAnD,cAAAoC,QAAAe,EAAAhD,WAAA2D,aAAAX,EAAAH,cAAAe,YAAAZ,EAAAL,aAAAkB,YAAAb,EAAA/C,SAAA6D,eAAA,EAAAC,MAAA,IAAAC,UAAA,EAAAC,OAAA,gBAAiNd,EAAA,aAAkBE,OAAOa,KAAA,UAAAC,KAAA,QAAAxC,KAAA,WAAiDuC,KAAA,YAAgBlB,EAAAO,GAAA,UAAAP,EAAAO,GAAA,KAAAJ,EAAA,OAAyCM,YAAA,iBAAAJ,OAAoCa,KAAA,OAAaA,KAAA,QAAYlB,EAAAO,GAAA,oBAAAP,EAAAO,GAAA,KAAAJ,EAAA,aAAyDiB,aAAaC,cAAA,QAAqBhB,OAAQc,KAAA,QAAAxC,KAAA,WAAgC2C,IAAKC,MAAAvB,EAAAT,gBAA0BS,EAAAO,GAAA,oBAAAP,EAAAO,GAAA,KAAAJ,EAAA,YAAAA,EAAA,MAAAH,EAAAO,GAAA,KAAAJ,EAAA,MAAAH,EAAAO,GAAA,KAAAJ,EAAA,aAAkHE,OAAO1B,KAAA,UAAA6C,QAAAxB,EAAA9C,UAAAiE,KAAA,QAAuDG,IAAKC,MAAAvB,EAAA1B,YAAsB0B,EAAAO,GAAA,iBAE3+BkB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACExF,EACA0D,GATF,EAVA,SAAA+B,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/18.d01c8c15a2d5f8234a0c.js","sourcesContent":["<template>\r\n  <el-container>\r\n    <el-aside width=\"500px\">\r\n      <br>\r\n      <br>\r\n      <el-upload class=\"elmro\"\r\n                 ref=\"upload\"\r\n                 :action=\"uploaadAction\"\r\n                 :headers=\"uploadHead\"\r\n                 :on-preview=\"handlePreview\"\r\n                 :on-remove=\"handleRemove\"\r\n                 :file-list=\"fileList\"\r\n                 :auto-upload=\"false\"\r\n                 :limit=\"1000\"\r\n                 :multiple=\"true\"\r\n                 accept=\".zip, .xml\">\r\n        <el-button slot=\"trigger\"\r\n                   size=\"small\"\r\n                   type=\"primary\">选取文件</el-button>\r\n        <div slot=\"tip\"\r\n             class=\"el-upload__tip\">支持zip,xml格式的文件</div>\r\n        <el-button style=\"margin-left: 10px;\"\r\n                   size=\"small\"\r\n                   type=\"success\"\r\n                   @click=\"submitUpload\">上传到服务器</el-button>\r\n      </el-upload>\r\n    </el-aside>\r\n    <el-aside>\r\n      <br>\r\n      <br>\r\n      <el-button type=\"primary\"\r\n                 :loading=\"isloading\"\r\n                 size=\"mini\"\r\n                 @click=\"analysis\">解析</el-button>\r\n      <!-- <h1>解析进度</h1> -->\r\n      <!-- <el-progress class=\"aprogress\"\r\n                   :percentage=this.processNum></el-progress> -->\r\n    </el-aside>\r\n  </el-container>\r\n</template>\r\n<script>\r\nimport { mapState, mapMutations } from 'vuex'\r\nexport default {\r\n  computed: {\r\n    ...mapState({\r\n      prom: (state) => state.prom,\r\n      user: (state) => state.user\r\n    })\r\n  },\r\n  data () {\r\n    return {\r\n      uploaadAction: '',\r\n      processNum: 0,\r\n      head: {},\r\n      uploadHead: {},\r\n      fileList: [],\r\n      isloading: false\r\n    }\r\n  },\r\n  created () {\r\n    if (sessionStorage.getItem('pname')) {\r\n      this.setpname_prom(sessionStorage.getItem('pname'))\r\n    }\r\n    // 在页面刷新时将vuex里的信息保存到localStorage里\r\n    window.addEventListener('beforeunload', () => {\r\n      sessionStorage.setItem('pname', sessionStorage.getItem('pname'))\r\n    })\r\n    console.log('这是create 函数')\r\n    this.head = { 'projectname': this.prom.prom_pname, 'username': JSON.parse(sessionStorage.user).username, 'filetype': 'mr' }\r\n    this.uploadHead = { 'projectname': this.prom.prom_pname, 'username': JSON.parse(sessionStorage.user).username, 'filetype': 'mr', 'Authorization': 'bearer ' + sessionStorage.getItem('token') }\r\n    this.uploaadAction = this.user.httppath + '/api/Mr/Upload'\r\n    console.log(this.uploaadAction)\r\n    console.log(this.head)\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setpname_prom']),\r\n    analysis () {\r\n      // console.log(' analysis 测试进度条比变化')\r\n      if (this.prom.prom_pname === 'default') {\r\n        this.$notify({\r\n          title: '警告',\r\n          message: '没有权限对公有工程进行数据入库',\r\n          type: 'warning'\r\n        })\r\n        return\r\n      }\r\n      this.dbInput()\r\n    },\r\n    send () {\r\n      console.log('这是send 函数')\r\n    },\r\n    processbar () {\r\n      console.log('函数 processbar 测试进度条某一刻的值')\r\n      this.$http.post(this.user.httppath + '/api/Mr/MrAnalysisProcess',\r\n        {},\r\n        { headers: this.head }\r\n      ).then((response) => {\r\n        console.log('函数 processbar 响应')\r\n        console.log(response)\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '解析成功',\r\n          type: 'success'\r\n        })\r\n        return response\r\n      }).catch((error) => {\r\n        console.log('函数 processbar 响应 失败')\r\n        console.log('error')\r\n        this.$notify({\r\n          title: '警告',\r\n          message: error,\r\n          type: 'warning'\r\n        })\r\n        console.log(error)\r\n      })\r\n    },\r\n    dbInput () {\r\n      console.log('dbInput')\r\n      this.isloading = true\r\n      this.$http.post(this.user.httppath + '/api/Mr/Mranalysis',\r\n        {},\r\n        { headers: this.head }\r\n      ).then((response) => {\r\n        this.isloading = false\r\n        this.$notify({\r\n          title: '成功',\r\n          message: '解析成功',\r\n          type: 'success'\r\n        })\r\n        console.log('函数 dbInput success')\r\n        console.log(response)\r\n      }).catch((error) => {\r\n        this.isloading = false\r\n        this.$notify({\r\n          title: '警告',\r\n          message: '解析失败' + error,\r\n          type: 'warning'\r\n        })\r\n        console.log('函数 dbInput error')\r\n        console.log(error)\r\n      })\r\n    },\r\n    // myUpload () {\r\n    //   console.log('这是函数 myupload')\r\n    //   // this.submitUpload ()\r\n    //   console.log(this.fileList)\r\n    //   this.$http.post(this.user.httppath + '/api/Mr/Upload',\r\n    //     this.fileList\r\n    //   ).then((response) => {\r\n    //   }).catch((error) => {\r\n    //     console.log(error)\r\n    //   })\r\n    // },\r\n    submitUpload () {\r\n      console.log('这是函数 submitUpload')\r\n      if (this.prom.prom_pname === 'default') {\r\n        this.$notify({\r\n          title: '警告',\r\n          message: '没有权限对公共工程进行操作',\r\n          type: 'warning'\r\n        })\r\n      } else {\r\n        // var sStorage = sessionStorage.getItem('user')\r\n        // this.head = {'projectname': this.prom.prom_pname, 'username': this.user.user.username, 'filetype': 'mr'}\r\n        console.log(this.head)\r\n        this.$refs.upload.submit()\r\n      }\r\n    },\r\n    handleRemove (file, fileList) {\r\n      console.log('这是函数 handleRemove')\r\n      console.log(file)\r\n      console.log(fileList)\r\n    },\r\n    handlePreview (file) {\r\n      console.log('这是函数 handlePreview')\r\n      console.log(file)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.elmro {\r\n  text-align: center;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/mr/mrinput.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-aside',{attrs:{\"width\":\"500px\"}},[_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-upload',{ref:\"upload\",staticClass:\"elmro\",attrs:{\"action\":_vm.uploaadAction,\"headers\":_vm.uploadHead,\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"file-list\":_vm.fileList,\"auto-upload\":false,\"limit\":1000,\"multiple\":true,\"accept\":\".zip, .xml\"}},[_c('el-button',{attrs:{\"slot\":\"trigger\",\"size\":\"small\",\"type\":\"primary\"},slot:\"trigger\"},[_vm._v(\"选取文件\")]),_vm._v(\" \"),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"支持zip,xml格式的文件\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":_vm.submitUpload}},[_vm._v(\"上传到服务器\")])],1)],1),_vm._v(\" \"),_c('el-aside',[_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.isloading,\"size\":\"mini\"},on:{\"click\":_vm.analysis}},[_vm._v(\"解析\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-10d516b9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/mr/mrinput.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-10d516b9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./mrinput.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mrinput.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./mrinput.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-10d516b9\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./mrinput.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/mr/mrinput.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
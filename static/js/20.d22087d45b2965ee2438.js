webpackJsonp([20],{opfG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("hRKE"),s=a.n(l),i=a("4YfN"),o=a.n(i),n=a("9rMa"),r={computed:o()({},Object(n.e)({prom:function(e){return e.prom},user:function(e){return e.user}})),data:function(){return{tableHead:[],typedate:[{value:"MRO"},{value:"MRE"},{value:"MRS"}],typevalue:"",tabledate:[],tablevalue:"",tabledis:!0,quotadata:[],quotavalue:"",quotadis:!0,celldata:[],cellvalue:"",celladis:!0,time:"",thresholdLow:"",thresholdHight:"",drawX:[],drawY:[],data:[]}},created:function(){var e=this;sessionStorage.getItem("pname")&&this.setpname_prom(sessionStorage.getItem("pname")),window.addEventListener("beforeunload",function(){sessionStorage.setItem("pname",sessionStorage.getItem("pname"))});var t={headers:{projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"mr"}};this.$http.post(this.user.httppath+"/api/MRTest/MrInfo",{},t).then(function(t){console.log("created"),e.tableHead=t,console.log(t)}).catch(function(e){console.log(e)})},mounted:function(){this.drawLine()},methods:o()({},Object(n.d)(["setpname_prom"]),{counter:function(){var e=this;this.drawX=[],this.drawY=[],console.log("counter 这是计算函数函数");var t="";if(isNaN(this.thresholdLow)||isNaN(this.thresholdHight))this.$notify({title:"警告",message:"门限设置错误",type:"warning"});else{","===(t=this.thresholdLow+","+this.thresholdHight)&&(t="");var a="";null!==this.time&&(a=this.time.toString());var l={mrtype:this.typevalue,mrtable:this.tablevalue,mrcolumn:this.quotavalue,mrcell:this.cellvalue,time:a,threshold:t};0!==this.typevalue.length&&0!==this.tablevalue.length&&0!==this.quotavalue.length&&0!==this.cellvalue.length||this.$notify({title:"警告",message:"数据不完整",type:"warning"}),console.log(l);var s={headers:{projectname:this.prom.prom_pname,username:JSON.parse(sessionStorage.user).username,filetype:"mr"}};this.$http.post(this.user.httppath+"/api/MRTest/OneDAnalysis",l,s).then(function(t){for(var a in e.data=t,t)e.drawX.push(t[a].reportTime),e.drawY.push(t[a].value);console.log(t),console.log("这是横坐标"),console.log(e.drawX),console.log("这是纵坐标"),console.log(e.drawY),e.drawLine()}).catch(function(e){console.log(e)})}},mrtype:function(){if(console.log("函数 mrtype"),console.log(this.tableHead),this.tableHead!==[]){for(var e in this.tabledate=[],this.tablevalue="",this.tabledis=!1,this.tableHead[this.typevalue])if("objId"!==e){var t={};t.value=e,this.tabledate.push(t)}this.quotadata=[],this.quotavalue="",this.quotadis=!0,this.celldata=[],this.cellvalue="",this.celladis=!0,console.log(this.tabledis),console.log(this.tabledate),console.log("------")}},mrtable:function(){console.log("函数 mrtable"),this.quotadis=!1,this.quotadata=[],this.quotavalue="";var e=this.tableHead[this.typevalue][this.tablevalue];for(var t in this.tableHead[this.typevalue][this.tablevalue]){var a={};a.value=e[t],this.quotadata.push(a)}this.celldata=[],this.cellvalue="",this.celladis=!0},mrquota:function(){this.celladis=!1,this.celldata=[],this.cellvalue="";var e={value:"all"};this.celldata.push(e),console.log(this.tableHead[this.typevalue]),console.log(this.tableHead[this.typevalue].objId);var t=this.tableHead[this.typevalue].objId;for(var a in t){var l={};l.value=t[a],this.celldata.push(l)}console.log("函数 mrquota")},drawLine:function(){var e=this.$echarts.init(document.getElementById("myChart")),t={title:{text:"一维分析"},xAxis:{name:"时间",nameLocation:"middle",type:"category",data:this.drawX},yAxis:{name:this.quotavalue,type:"value"},dataZoom:[{type:"slider",show:!0,xAxisIndex:[0],start:1,end:100},{type:"slider",show:!0,yAxisIndex:[0],left:"93%",start:0,end:100},{type:"inside",xAxisIndex:[0],start:0,end:100},{type:"inside",yAxisIndex:[0],start:0,end:100}],series:[{data:this.drawY,type:"line"}]};t&&"object"===(void 0===t?"undefined":s()(t))&&e.setOption(t,!0)}})},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("br"),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 类型"},on:{change:function(t){e.mrtype()}},model:{value:e.typevalue,callback:function(t){e.typevalue=t},expression:"typevalue"}},e._l(e.typedate,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("i",{staticClass:"el-icon-caret-right"}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 表名称",disabled:e.tabledis},on:{change:function(t){e.mrtable()}},model:{value:e.tablevalue,callback:function(t){e.tablevalue=t},expression:"tablevalue"}},e._l(e.tabledate,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("i",{staticClass:"el-icon-caret-right"}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 表名称",disabled:e.quotadis},on:{change:function(t){e.mrquota()}},model:{value:e.quotavalue,callback:function(t){e.quotavalue=t},expression:"quotavalue"}},e._l(e.quotadata,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("i",{staticClass:"el-icon-caret-right"}),e._v(" "),a("el-select",{attrs:{size:"small",placeholder:"mr 小区名称",disabled:e.celladis},model:{value:e.cellvalue,callback:function(t){e.cellvalue=t},expression:"cellvalue"}},e._l(e.celldata,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:function(t){e.counter()}}},[e._v("开始查询")]),e._v(" "),a("br"),e._v(" "),a("div",[a("br"),e._v("\n      备选项:\n      "),a("br"),e._v(" "),a("div",[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:hh:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),e._v(" "),a("br"),e._v(" "),a("m-input",{attrs:{placeholder:"门限值 低",theme:"danger",size:"small"},model:{value:e.thresholdLow,callback:function(t){e.thresholdLow=t},expression:"thresholdLow"}}),e._v(" "),a("i",{staticClass:"el-icon-minus"}),e._v(" "),a("m-input",{attrs:{placeholder:"门限值 高",theme:"danger",size:"small"},model:{value:e.thresholdHight,callback:function(t){e.thresholdHight=t},expression:"thresholdHight"}}),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("div",{style:{width:"900px",height:"300px"},attrs:{id:"myChart"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data}},e._l(e.data[0],function(t,l){return a("el-table-column",{key:l,attrs:{label:l},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row[l])+"\n        ")]}}])})}),1)],1)],1)},staticRenderFns:[]},h=a("C7Lr")(r,u,!1,null,null,null);t.default=h.exports}});
//# sourceMappingURL=20.d22087d45b2965ee2438.js.map